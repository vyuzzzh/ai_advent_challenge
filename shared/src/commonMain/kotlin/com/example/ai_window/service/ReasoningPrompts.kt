package com.example.ai_window.service

/**
 * Prompts for Day 4: Different Reasoning Approaches
 *
 * Compares 4 different ways AI can approach problem-solving:
 * 1. Direct - straightforward answer
 * 2. Step-by-step - explicit step-by-step reasoning
 * 3. AI-generated prompt - meta-prompting approach
 * 4. Experts panel - multiple expert perspectives
 */
object ReasoningPrompts {

    /**
     * Fixed business case for testing
     */
    val BUSINESS_CASE = """
        Компания получает 500 резюме в месяц. HR-отдел из 3 человек тратит по 20 минут на каждое резюме.

        Текущая ситуация:
        - Общее время на обработку: 500 × 20 мин = 10,000 минут (166 часов) в месяц
        - На 1 HR-специалиста: ~55 часов в месяц только на просмотр резюме
        - Проблемы: усталость персонала, возможные пропуски хороших кандидатов, медленный процесс

        Цель: Оптимизировать процесс найма, сократив время обработки и улучшив качество отбора кандидатов.
    """.trimIndent()

    /**
     * Approach 1: Direct answer (no special instructions)
     */
    fun getDirectPrompt(): String = """
        $BUSINESS_CASE

        Как решить эту проблему? Дай конкретные рекомендации.
    """.trimIndent()

    /**
     * Approach 2: Step-by-step reasoning
     */
    fun getStepByStepPrompt(): String = """
        $BUSINESS_CASE

        ВАЖНО: Реши эту задачу ПОШАГОВО, явно показывая каждый шаг рассуждения:

        ШАГ 1: АНАЛИЗ ПРОБЛЕМЫ
        - Какие основные проблемы?
        - Какие метрики важны?
        - Что хотим улучшить?

        ШАГ 2: ОПРЕДЕЛЕНИЕ УЗКИХ МЕСТ
        - Где теряется время?
        - Какие процессы неэффективны?
        - Какие риски?

        ШАГ 3: ВАРИАНТЫ РЕШЕНИЙ
        - Решение 1: описание, плюсы, минусы
        - Решение 2: описание, плюсы, минусы
        - Решение 3: описание, плюсы, минусы

        ШАГ 4: ВЫБОР ОПТИМАЛЬНОГО РЕШЕНИЯ
        - Почему именно это решение?
        - Какие критерии выбора?

        ШАГ 5: ПЛАН ВНЕДРЕНИЯ
        - Этапы внедрения
        - Ожидаемые результаты
        - ROI

        Выполняй каждый шаг последовательно, показывая свои рассуждения.
    """.trimIndent()

    /**
     * Approach 3: AI-generated prompt (meta-prompting)
     * First, ask AI to create a prompt, then use that prompt
     */
    fun getAIPromptGenerationRequest(): String = """
        Ты - эксперт по созданию промптов для AI. Твоя задача: создать ОПТИМАЛЬНЫЙ промпт для решения следующей бизнес-задачи:

        $BUSINESS_CASE

        Создай промпт, который заставит AI дать максимально эффективное и практичное решение.

        Верни ТОЛЬКО текст промпта, без дополнительных объяснений. Промпт должен начинаться сразу с инструкций.
    """.trimIndent()

    /**
     * EXPERT 1: HR Specialist
     */
    fun getHRExpertPrompt(): String = """
        $BUSINESS_CASE

        Ты - Мария, HR-специалист с 10-летним опытом в рекрутинге.
        Твоя специализация: качество отбора кандидатов, опыт кандидатов, HR-процессы.

        Проанализируй ситуацию ТОЛЬКО с точки зрения HR:

        1. АНАЛИЗ ПРОБЛЕМЫ:
           - Как текущая нагрузка (55 часов/месяц на просмотр резюме) влияет на качество отбора?
           - Какие HR-риски возникают при усталости персонала?
           - Как это влияет на опыт кандидатов?

        2. HR-РЕШЕНИЯ:
           - Какие HR-процессы нужно оптимизировать?
           - Как улучшить качество скрининга резюме?
           - Как сохранить человеческий подход при оптимизации?

        3. РЕКОМЕНДАЦИИ:
           - Конкретные шаги для HR-отдела
           - Как измерить улучшение качества найма?

        Рассуждай детально, показывая свою HR-экспертизу.
    """.trimIndent()

    /**
     * EXPERT 2: IT Analyst
     */
    fun getITExpertPrompt(): String = """
        $BUSINESS_CASE

        Ты - Дмитрий, IT-аналитик, специалист по автоматизации бизнес-процессов.
        Твоя специализация: технологические решения, автоматизация, интеграции систем.

        Проанализируй ситуацию ТОЛЬКО с точки зрения IT и автоматизации:

        1. ТЕХНОЛОГИЧЕСКИЙ АНАЛИЗ:
           - Какие процессы можно автоматизировать?
           - Какие технологии подходят для скрининга резюме?
           - Какие данные можно извлечь и анализировать автоматически?

        2. IT-РЕШЕНИЯ:
           - ATS (Applicant Tracking System) - какие функции нужны?
           - AI/ML для анализа резюме - что можно автоматизировать?
           - Интеграции с существующими системами?

        3. ТЕХНИЧЕСКИЕ РЕКОМЕНДАЦИИ:
           - Архитектура решения
           - Инструменты и платформы
           - Этапы внедрения

        Рассуждай как IT-эксперт, фокусируясь на технологиях.
    """.trimIndent()

    /**
     * EXPERT 3: Business Consultant
     */
    fun getBusinessExpertPrompt(): String = """
        $BUSINESS_CASE

        Ты - Елена, бизнес-консультант, эксперт по оптимизации процессов.
        Твоя специализация: ROI, эффективность, масштабируемость, финансовая оптимизация.

        Проанализируй ситуацию ТОЛЬКО с точки зрения бизнеса и финансов:

        1. ФИНАНСОВЫЙ АНАЛИЗ:
           - Сколько стоит текущий процесс? (зарплаты, время, упущенные возможности)
           - Какие скрытые издержки?
           - Цена ошибки (пропуск хорошего кандидата, найм плохого)?

        2. ROI РАСЧЕТЫ:
           - Какая экономия от автоматизации?
           - Срок окупаемости инвестиций?
           - Как измерить эффективность?

        3. БИЗНЕС-РЕКОМЕНДАЦИИ:
           - Приоритизация решений по ROI
           - Масштабируемость решения
           - KPI для отслеживания результатов

        Рассуждай как бизнес-консультант, фокусируясь на цифрах и ROI.
    """.trimIndent()

    /**
     * IT CLARIFICATION: Ask for more details
     */
    fun getITClarificationPrompt(originalResponse: String, question: String): String = """
        $BUSINESS_CASE

        Ты - Дмитрий, IT-аналитик.

        Твой предыдущий ответ:
        $originalResponse

        Менеджер просит уточнить:
        "$question"

        Дай более детальный ответ на этот вопрос, оставаясь в рамках своей IT-экспертизы.
    """.trimIndent()

    /**
     * MANAGER SYNTHESIS: Manager creates final decision
     */
    fun getManagerSynthesisPrompt(hrOpinion: String, itOpinion: String, businessOpinion: String): String = """
        Ты - менеджер проекта. Ты собрал мнения трех экспертов по задаче оптимизации процесса найма.

        ЗАДАЧА:
        $BUSINESS_CASE

        МНЕНИЕ HR-СПЕЦИАЛИСТА (Мария):
        $hrOpinion

        МНЕНИЕ IT-АНАЛИТИКА (Дмитрий):
        $itOpinion

        МНЕНИЕ БИЗНЕС-КОНСУЛЬТАНТА (Елена):
        $businessOpinion

        Твоя задача как менеджера - создать ИТОГОВОЕ РЕШЕНИЕ:

        1. СИНТЕЗ: Какие общие рекомендации? Где эксперты дополняют друг друга?

        2. КОМПЛЕКСНОЕ РЕШЕНИЕ:
           - HR аспекты (качество найма, опыт команды)
           - IT решения (какие технологии внедрить)
           - Бизнес обоснование (ROI, сроки окупаемости)

        3. ПЛАН ДЕЙСТВИЙ:
           - Конкретные шаги (что делать)
           - Приоритеты (что первым)
           - Ожидаемые результаты (метрики успеха)

        Сформулируй финальное решение как менеджер, объединяя лучшее от всех экспертов.
    """.trimIndent()

    /**
     * Helper function to wrap any approach in JSON response format
     */
    fun wrapInJsonFormat(promptText: String): String = """
        ОБЯЗАТЕЛЬНО отвечай ТОЛЬКО в JSON формате, БЕЗ дополнительного текста, БЕЗ markdown блоков ```!

        Формат ответа:
        {
          "response": {
            "title": "Решение задачи",
            "content": "ЗДЕСЬ твой полный детальный ответ на задачу",
            "metadata": {
              "confidence": 0.9,
              "category": "reasoning"
            }
          }
        }

        $promptText

        КРИТИЧЕСКИ ВАЖНО:
        1. Верни ТОЛЬКО валидный JSON объект, начинающийся с { и заканчивающийся }
        2. БЕЗ markdown блоков ``` вообще
        3. В поле "content" помести ВЕСЬ свой ответ (можно использовать \n для переносов строк)
        4. Не обрывай JSON на середине - обязательно закрой все скобки правильно
    """.trimIndent()
}
